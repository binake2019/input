(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-22fa87d8"],{7397:function(e,t,a){"use strict";a.r(t);var r=a("7a23"),o={class:"page-wrap"},c={class:"header-section has-header-main"},s={class:"item-detail-section section-space"},n={class:"container"},i={class:"row"},l={class:"col-lg-6 pe-xl-5"},d={class:"item-detail-content"},u={class:"item-detail-img-container mb-4"},b=["src"],m={class:"col-lg-6"},p={class:"item-detail-content mt-4 mt-lg-0"},O={class:"item-detail-title product-title mb-2"},f={class:"item-detail-btns mt-4"},h={class:"btns-group d-flex"},I={key:0,class:"flex-grow-1"},N={key:1,class:"flex-grow-1"},S={key:2,class:"flex-grow-1"},g={key:3,class:"flex-grow-1"},k={key:4,class:"flex-grow-1"},j={key:5,class:"flex-grow-1"},T={class:"row"};function B(e,t,a,B,v,w){var C=Object(r["resolveComponent"])("HeaderDashboard"),E=Object(r["resolveComponent"])("ProRemarkSection"),x=Object(r["resolveComponent"])("ProBaseSection"),A=Object(r["resolveComponent"])("ProQuotaSection"),V=Object(r["resolveComponent"])("ProBidsSection"),U=Object(r["resolveComponent"])("ProActivitySection"),_=Object(r["resolveComponent"])("Footer"),L=Object(r["resolveComponent"])("ProTradeSection");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",o,[Object(r["createElementVNode"])("header",c,[Object(r["createVNode"])(C)]),Object(r["createElementVNode"])("section",s,[Object(r["createElementVNode"])("div",n,[Object(r["createElementVNode"])("div",i,[Object(r["createElementVNode"])("div",l,[Object(r["createElementVNode"])("div",d,[Object(r["createElementVNode"])("div",u,[Object(r["createElementVNode"])("img",{src:v.product.imageUrl,alt:"",class:"w-100 rounded-3"},null,8,b)]),Object(r["createVNode"])(E,{item:v.product},null,8,["item"])])]),Object(r["createElementVNode"])("div",m,[Object(r["createElementVNode"])("div",p,[Object(r["createElementVNode"])("h1",O,Object(r["toDisplayString"])(v.product.title),1),Object(r["createVNode"])(x,{item:v.baseInfo},null,8,["item"]),Object(r["createElementVNode"])("div",f,[Object(r["createElementVNode"])("ul",h,[v.product.status==v.STATUS.IDLE&&1==v.isOwner&&v.biz_config.isOpenSell?(Object(r["openBlock"])(),Object(r["createElementBlock"])("li",I,[Object(r["createElementVNode"])("a",{href:"#",onClick:t[0]||(t[0]=function(){return w.onSellBtnClick&&w.onSellBtnClick.apply(w,arguments)}),class:"btn btn-dark d-block"},"卖")])):Object(r["createCommentVNode"])("",!0),v.product.status==v.STATUS.ON_SELL&&0==v.isOwner&&v.biz_config.isOpenSell?(Object(r["openBlock"])(),Object(r["createElementBlock"])("li",N,[Object(r["createElementVNode"])("a",{href:"#","data-bs-toggle":"modal",onClick:t[1]||(t[1]=function(e){return w.onBuyBtnClick()}),"data-bs-target":"#placeBidModal",class:"btn btn-dark d-block"},"买")])):Object(r["createCommentVNode"])("",!0),v.product.status==v.STATUS.ON_SELL&&0==v.isOwner&&v.biz_config.isOpenSell?(Object(r["openBlock"])(),Object(r["createElementBlock"])("li",S,[Object(r["createElementVNode"])("a",{href:"#","data-bs-toggle":"modal",onClick:t[2]||(t[2]=function(e){return w.onOfferBtnClick()}),"data-bs-target":"#placeBidModal",class:"btn btn-dark d-block"},"报价")])):Object(r["createCommentVNode"])("",!0),v.product.status==v.STATUS.WAIT_AUCTION?(Object(r["openBlock"])(),Object(r["createElementBlock"])("li",g)):Object(r["createCommentVNode"])("",!0),v.product.status==v.STATUS.ON_AUCTION&&0==v.isOwner&&1==v.isTopBidder&&v.biz_config.isOpenSell?(Object(r["openBlock"])(),Object(r["createElementBlock"])("li",k,[Object(r["createElementVNode"])("a",{href:"#","data-bs-toggle":"modal",onClick:t[3]||(t[3]=function(e){return w.onOfferBtnClick()}),class:"btn btn-dark d-block"},"投标")])):Object(r["createCommentVNode"])("",!0),v.product.status==v.STATUS.ON_AUCTION&&0==v.isOwner&&0==v.isTopBidder&&v.biz_config.isOpenSell?(Object(r["openBlock"])(),Object(r["createElementBlock"])("li",j,[Object(r["createElementVNode"])("a",{href:"#","data-bs-toggle":"modal",onClick:t[4]||(t[4]=function(e){return w.onOfferBtnClick()}),"data-bs-target":"#placeBidModal",class:"btn btn-dark d-block"},"投标")])):Object(r["createCommentVNode"])("",!0)])]),Object(r["createVNode"])(A),Object(r["createVNode"])(V,{auctionId:v.curAuctionId},null,8,["auctionId"])])])]),Object(r["createElementVNode"])("div",T,[Object(r["createVNode"])(U,{itemId:v.curId},null,8,["itemId"])])])]),Object(r["createVNode"])(_,{classname:"bg-dark on-dark"}),Object(r["createVNode"])(L,{ref:"tradeBox",product:v.product},null,8,["product"])])}var v=a("c7eb"),w=a("1da1"),C=a("07a4"),E=a("3843"),x=a("96a1"),A=a("b0f3"),V=a("04fc"),U=a("7b31"),_={name:"ProductDetail",components:{ProBaseSection:E["a"]},data:function(){return{SectionData:C["a"],biz_config:x["a"],STATUS:x["a"].proStatus,id:this.$route.params.id,isOwner:!1,isTopBidder:!1,curId:"",productInfos:[],priceInfos:[],feeList:[],product:{},tradeForm:{isBuy:!1,type:"",price:""},fee:{tradePriceText:"",balanceText:"",serviceFeeText:"",totalPayText:""},btnText:"",modalTitle:"",modalLabelText1:"",transferList:[],bidList:[],baseInfo:{},curSellId:"",curAuctionId:""}},methods:{onSellBtnClick:function(){window.location.href="/sell-"+this.id},processBaseInfo:function(e){this.baseInfo.ownerNickName=e.ownerNickName,this.baseInfo.authorNickName=e.authorNickName,this.baseInfo.ownerAvatar=e.ownerAvatar,this.baseInfo.authorAvatar=e.authorAvatar,this.baseInfo.ownerPath="author-"+e.ownerId,this.baseInfo.authorPath="author-"+e.authorId;var t=A["a"].getCurUserId();if(e.ownerId==t&&(this.baseInfo.ownerNickName="您"),e.authorId==t&&(this.baseInfo.authorNickName="您"),e.status==x["a"].proStatus.ON_AUDIT||e.status==x["a"].proStatus.AUDIT_FAILED||e.status==x["a"].proStatus.AUDIT_SUCCESS){var a="";e.status==x["a"].proStatus.ON_AUDIT?a="审核期间，您的 NFT 审核通过后才能被其他用户看到":e.status==x["a"].proStatus.AUDIT_FAILED?a="您的 NFT 审核失败":e.status==x["a"].proStatus.AUDIT_SUCCESS&&(a="审核期间，您的 NFT 审核通过后才能被其他用户看到"),this.baseInfo.auditMsg={title:"审查信息",text:a}}else if(e.status==x["a"].proStatus.IDLE);else if(e.status==x["a"].proStatus.WAIT_SELL){var r="销售开始 "+A["a"].timeFormat(e.saleBeginTime);this.baseInfo.sellMsg={title:"销售开始时间",text:r}}else if(e.status==x["a"].proStatus.ON_SELL){var o="销售结束于 "+A["a"].timeFormat(e.saleEndTime);this.baseInfo.sellMsg={title:"销售结束时间",text:o}}else if(e.status==x["a"].proStatus.WAIT_AUCTION){var c="销售始于 "+A["a"].timeFormat(e.auctionBeginTime);this.baseInfo.auctionMsg={title:"拍卖开始时间",text:c}}else if(e.status==x["a"].proStatus.ON_AUCTION){var s="销售结束于 "+A["a"].timeFormat(e.auctionEndTime);this.baseInfo.auctionMsg={title:"拍卖结束时间",text:s}}e.status==x["a"].proStatus.ON_SELL||e.status==x["a"].proStatus.WAIT_SELL?this.baseInfo.priceMsg={title:"售价",text:e.curSellPrice+" "+x["a"].currency}:e.status!=x["a"].proStatus.ON_AUCTION&&e.status!=x["a"].proStatus.WAIT_AUCTION||(this.baseInfo.priceMsg={title:"起始价",text:e.auctionStartingPrice+" "+x["a"].currency}),e.status==x["a"].proStatus.ON_SELL&&e.highestBidderId?this.baseInfo.quotaMsg={avatar:e.highestBidderAvatar,title:"@"+e.highestBidderNickName,text:"最高报价 @"+e.highestBidderNickName+" "+e.maxQuotedPrice+" "+x["a"].currency,path:"author-"+e.highestBidderId}:e.status==x["a"].proStatus.ON_AUCTION&&e.highestBidderId&&(this.baseInfo.quotaMsg={avatar:e.highestBidderAvatar,title:"@"+e.highestBidderNickName,text:"最高标价 @"+e.highestBidderNickName+" "+e.maxQuotedPrice+" "+x["a"].currency,path:"author-"+e.highestBidderId}),console.log("this.baseInfo"),console.log(this.baseInfo)},beforeTrade:function(){return Object(w["a"])(Object(v["a"])().mark((function e(){return Object(v["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,V["a"].getAddress();case 2:return e.next=4,A["b"].checkKyc();case 4:case"end":return e.stop()}}),e)})))()},onBuyBtnClick:function(){var e=this;return Object(w["a"])(Object(v["a"])().mark((function t(){var a;return Object(v["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.btnText="报价",a=e.$refs.tradeBox,a.doBuy(),t.next=5,e.beforeTrade();case 5:case"end":return t.stop()}}),t)})))()},onOfferBtnClick:function(){var e=this;return Object(w["a"])(Object(v["a"])().mark((function t(){var a;return Object(v["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(1!=e.isTopBidder){t.next=3;break}return U["a"].success("您已是最高出价者，不能连续叫价"),t.abrupt("return");case 3:return e.btnText=e.product.status==x["a"].proStatus.ON_SELL?"报价":"拍卖",a=e.$refs.tradeBox,a.doOffer(),t.next=8,e.beforeTrade();case 8:case"end":return t.stop()}}),t)})))()},loadCollections:function(){var e=this,t={id:this.id};this.axios.post("/artwork/detail",this.qs.stringify(t),{headers:{"veri-ex-client":"web",token:this.token}}).then((function(t){if(1==t.data.code){var a=t.data.data;a.path="/collection-detail-"+a.id,a.authorLink="/author",a.price=null==a.curSellPrice||0==a.curSellPrice?a.lastTradePrice:a.curSellPrice,a.detailLink="/product-details-v1-"+a.id,a.metaTextOne="By "+a.author,a.metaTextTwo="First edition",a.royalties=A["a"].percentFormat(a.royalties),e.isOwner=A["a"].getCurUserId()==a.ownerId,A["a"].isEmpty(A["a"].getCurUserId())||A["a"].isEmpty(a.highestBidderId)?e.isTopBidder=!1:e.isTopBidder=A["a"].getCurUserId()==a.highestBidderId,e.isCreator=A["a"].getCurUserId()==a.authorId,e.product=a,a.status==x["a"].proStatus.ON_SELL?e.curSellId=a.curPendingId:a.status==x["a"].proStatus.ON_AUCTION&&(e.curAuctionId=a.curPendingId),e.processBaseInfo(e.product)}})).catch((function(t){e.$message({type:"error",message:t.message})}))},init:function(){this.loadCollections()}},mounted:function(){var e=this;return Object(w["a"])(Object(v["a"])().mark((function t(){return Object(v["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.curId=e.id,e.init();case 2:case"end":return t.stop()}}),t)})))()}},L=(a("ebe4"),a("6b0d")),y=a.n(L);const P=y()(_,[["render",B]]);t["default"]=P},a732:function(e,t,a){},ebe4:function(e,t,a){"use strict";a("a732")}}]);